/*!
 * cdp-cli.js 0.0.2
 *
 * Date: 2017-05-28T10:32:45.458Z
 */
module.exports=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=12)}([function(module,exports){module.exports=require("cdp-lib")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const path=__webpack_require__(2);const inquirer=__webpack_require__(3);const cdp_lib_1=__webpack_require__(0);const fs=cdp_lib_1.Utils.fs;const chalk=cdp_lib_1.Utils.chalk;const _=cdp_lib_1.Utils._;class PromptBase{constructor(){this._answers={};this._locale={}}prompting(cmdInfo){this._cmdInfo=cmdInfo;return new Promise((resolve,reject)=>{this.showPrologue();this.inquireLanguage().then(()=>{return this.inquire()}).then(settings=>{resolve(settings)}).catch(reason=>{reject(reason)})})}say(message){const GREETING="\n  ≡     "+chalk.cyan("∧＿∧")+"    ／￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣"+"\n    ≡ "+chalk.cyan("（ ´∀｀）")+"＜  "+chalk.yellow(message)+"\n  ≡   "+chalk.cyan("（  つ")+"＝"+chalk.cyan("つ")+"  ＼＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿"+"\n    ≡  "+chalk.cyan("｜ ｜ |")+"＼"+"\n    ≡ "+chalk.cyan("（_＿）＿）")+"＼"+"\n  ≡   "+chalk.red("◎")+"￣￣￣￣"+chalk.red("◎");console.log(GREETING)}get lang(){return this._locale}get answers(){return this._answers}get prologueComment(){return"Welcome to CDP Boilerplate Generator!"}showPrologue(){console.log("\n"+chalk.gray("================================================================"));this.say(this.prologueComment);console.log("\n"+chalk.gray("================================================================")+"\n")}updateAnswers(update){return _.merge(this._answers,update)}inquireSettings(){return new Promise((resolve,reject)=>{inquirer.prompt(this.questions).then(answers=>{resolve(answers)}).catch(reason=>{reject(reason)})})}config2description(config,itemName,color="cyan"){const item=this.lang.settings[itemName];if(null==item){console.error(chalk.red("error. item not found. item name: "+itemName));process.exit(1)}const prop=(()=>{if(item.props){return item.props[config[itemName]]}else if("boolean"===typeof config[itemName]){return item.bool[config[itemName]?"yes":"no"]}else{return config[itemName]}})();return item.label+chalk[color](prop)}loadLanguage(locale){try{this._locale=JSON.parse(fs.readFileSync(path.join(this._cmdInfo.pkgDir,"res/locales/messages."+locale+".json"),"utf8").toString())}catch(error){throw Error("Language resource JSON parse error: "+error.message)}}inquireLanguage(){return new Promise((resolve,reject)=>{const question=[{type:"list",name:"language",message:"Please choose your preferred language.",choices:[{name:"English/英語",value:"en-US"},{name:"Japanese/日本語",value:"ja-JP"}],default:0}];inquirer.prompt(question).then(answer=>{this.loadLanguage(answer.language);resolve()}).catch(reason=>{reject(reason)})})}confirmSettings(){return new Promise((resolve,reject)=>{console.log("\n"+chalk.gray("================================================================")+"\n");const settings=this.displaySettingsByAnswers(this._answers);console.log("\n"+chalk.gray("================================================================")+"\n");console.log("check: "+this.lang.prompt.common.confirm.message);const question=[{type:"confirm",name:"confirmation",message:this.lang.prompt.common.confirm.message,default:true}];inquirer.prompt(question).then(answer=>{if(answer.confirmation){resolve(settings)}else{reject()}}).catch(reason=>{reject(reason)})})}reflectCommandInfo(config){config.action=this._cmdInfo.action;config.minify=this._cmdInfo.cliOptions.minify;config.settings={force:this._cmdInfo.cliOptions.force,verbose:this._cmdInfo.cliOptions.verbose,silent:this._cmdInfo.cliOptions.silent,targetDir:this._cmdInfo.cliOptions.targetDir,lang:this.lang.type};return config}inquire(){return new Promise((resolve,reject)=>{const proc=()=>{this.inquireSettings().then(answers=>{this.updateAnswers(answers);this.confirmSettings().then(config=>{resolve(this.reflectCommandInfo(config))}).catch(()=>{setTimeout(proc)})}).catch(reason=>{reject(reason)})};setTimeout(proc)})}}exports.PromptBase=PromptBase},function(module,exports){module.exports=require("path")},function(module,exports){module.exports=require("inquirer")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const cdp_lib_1=__webpack_require__(0);const command_parser_1=__webpack_require__(5);const prompt_library_1=__webpack_require__(8);const prompt_mobile_1=__webpack_require__(9);const prompt_desktop_1=__webpack_require__(7);const prompt_web_1=__webpack_require__(10);const chalk=cdp_lib_1.Utils.chalk;function getInquirer(cmdInfo){switch(cmdInfo.action){case"create":break;default:console.error(chalk.red(cmdInfo.action+" command: under construction."));process.exit(1)}switch(cmdInfo.target){case"library":return new prompt_library_1.PromptLibrary;case"mobile":return new prompt_mobile_1.PromptMobileApp;case"desktop":return new prompt_desktop_1.PromptDesktopApp;case"web":return new prompt_web_1.PromptWebApp;default:console.error(chalk.red("unsupported target: "+cmdInfo.target));process.exit(1)}}function main(){process.title="cdp";const cmdInfo=command_parser_1.CommandParser.parse(process.argv);const inquirer=getInquirer(cmdInfo);inquirer.prompting(cmdInfo).then(config=>{return cdp_lib_1.default.execute(config)}).then(()=>{console.log(chalk.green(inquirer.lang.finished[cmdInfo.action]))}).catch(reason=>{if("string"!==typeof reason){if(null!=reason.message){reason=reason.message}else{reason=JSON.stringify(reason)}}console.error(chalk.red(reason))}).then(()=>{})}exports.main=main},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const path=__webpack_require__(2);const commander=__webpack_require__(11);const cdp_lib_1=__webpack_require__(0);const fs=cdp_lib_1.Utils.fs;const chalk=cdp_lib_1.Utils.chalk;class CommandParser{static parse(argv,options){const cmdline={pkgDir:this.getPackageDirectory(argv)};let pkg;try{pkg=JSON.parse(fs.readFileSync(path.join(cmdline.pkgDir,"package.json"),"utf8").toString())}catch(error){throw Error("package.json parse error: "+error.message)}commander.version(pkg.version).option("-f, --force","Continue execution even if in error situation").option("-t, --targetdir <path>","Specify project target directory").option("-c, --config <path>","Specify config file path").option("-v, --verbose","Show debug messages.").option("-s, --silent","Run as silent mode.").option("--no-minify","Not minified on release.");commander.command("init").description("init project").action(()=>{cmdline.action="init"}).on("--help",()=>{console.log(chalk.green("  Examples:"));console.log("");console.log(chalk.green("    $ cdp init"));console.log("")});commander.command("create <target>").description("create boilerplate for 'library, module' | 'mobile, app' | 'desktop' | 'web'").action(target=>{if(/^(module|app|library|mobile|desktop|web)$/i.test(target)){cmdline.action="create";cmdline.target=target;if("module"===cmdline.target){cmdline.target="library"}else if("app"===cmdline.target){cmdline.target="mobile"}}else{console.log(chalk.red.underline("  unsupported target: "+target));this.showHelp()}}).on("--help",()=>{console.log(chalk.green("  Examples:"));console.log("");console.log(chalk.green("    $ cdp create library"));console.log(chalk.green("    $ cdp create mobile"));console.log(chalk.green("    $ cdp create app -c setting.json"));console.log("")});commander.command("*",null,{noHelp:true}).action(cmd=>{console.log(chalk.red.underline("  unsupported command: "+cmd));this.showHelp()});commander.parse(argv);if(argv.length<=2){this.showHelp()}cmdline.cliOptions=this.toCommandLineOptions(commander);return cmdline}static getPackageDirectory(argv){const execDir=path.dirname(argv[1]);return path.join(execDir,"..")}static toCommandLineOptions(commander){return{force:!!commander.force,targetDir:commander.targetdir,config:commander.config,verbose:!!commander.verbose,silent:!!commander.silent,minify:commander.minify}}static showHelp(){const inform=text=>{return chalk.green(text)};commander.outputHelp(inform);process.exit(1)}}exports.CommandParser=CommandParser},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const libraryOnBrowser={projectType:"library",es:"es5",module:"umd",env:"web",tools:["webpack","nyc"],supportCSS:false};const libraryOnNode={projectType:"library",es:"es2015",module:"commonjs",env:"node",tools:["webpack","nyc"],supportCSS:false};const libraryOnElectron={projectType:"library",es:"es2015",module:"commonjs",env:"electron",tools:["webpack","nyc"],supportCSS:false};const mobileOnBrowser={projectType:"mobile",es:"es5",module:"amd",env:"web",tools:["nyc"],supportCSS:true};const desktopOnBrowser={projectType:"desktop",es:"es5",module:"amd",env:"web",tools:["nyc"],supportCSS:true};const desktopOnElectron={projectType:"desktop",es:"es2015",module:"commonjs",env:"electron-renderer",tools:["webpack","nyc"],supportCSS:true};const webOnBrowser={projectType:"web",es:"es5",module:"amd",env:"web",supportCSS:true};exports.default={library:{browser:libraryOnBrowser,node:libraryOnNode,electron:libraryOnElectron,ELECTRON_AVAILABLE:false},mobile:{browser:mobileOnBrowser},desctop:{browser:desktopOnBrowser,electron:desktopOnElectron},web:{browser:webOnBrowser}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const cdp_lib_1=__webpack_require__(0);const prompt_base_1=__webpack_require__(1);const chalk=cdp_lib_1.Utils.chalk;class PromptDesktopApp extends prompt_base_1.PromptBase{prompting(cmdInfo){return new Promise((resolve,reject)=>{reject("desktop app prompting, under construction.")})}get questions(){return[]}displaySettingsByAnswers(answers){return null}}exports.PromptDesktopApp=PromptDesktopApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const inquirer=__webpack_require__(3);const cdp_lib_1=__webpack_require__(0);const prompt_base_1=__webpack_require__(1);const default_config_1=__webpack_require__(6);const $=cdp_lib_1.Utils.$;const chalk=cdp_lib_1.Utils.chalk;const semverRegex=cdp_lib_1.Utils.semverRegex;const libConfig=default_config_1.default.library;class PromptLibrary extends prompt_base_1.PromptBase{get questions(){return[{type:"input",name:"projectName",message:this.lang.prompt.common.projectName.message,default:this.answers.projectName||"cool-project-name",validate:value=>{if(!/^[a-zA-Z0-9_-]*$/.test(value)){return this.lang.prompt.common.projectName.invalidMessage}else{return true}}},{type:"input",name:"version",message:this.lang.prompt.common.version.message,default:this.answers.version||"0.0.1",filter:value=>{if(semverRegex().test(value)){return semverRegex().exec(value)[0]}else{return value}},validate:value=>{if(semverRegex().test(value)){return true}else{return this.lang.prompt.common.version.invalidMessage}}},{type:"list",name:"license",message:this.lang.prompt.common.license.message,choices:[{name:this.lang.prompt.common.license.choices.apache2,value:"Apache-2.0"},{name:this.lang.prompt.common.license.choices.mit,value:"MIT"},{name:this.lang.prompt.common.license.choices.proprietary,value:"NONE"}],default:this.answers.license||"NONE"},{type:"list",name:"env",message:this.lang.prompt.library.env.message,choices:[{name:this.lang.prompt.common.env.choices.browser,value:"web"},{name:this.lang.prompt.common.env.choices.node,value:"node"},new inquirer.Separator,{name:this.lang.prompt.common.env.choices.electron+this.LIMITATION(),value:"electron"},{name:this.lang.prompt.common.env.choices.electronRenderer+this.LIMITATION(),value:"electron-renderer"}],filter:value=>{if(libConfig.ELECTRON_AVAILABLE){return value}else if("electron"===value){return"node"}else if("electron-renderer"===value){return"web"}else{return value}},default:this.answers.env||"web"},{type:"list",name:"extraSettings",message:this.lang.prompt.common.extraSettings.message,choices:[{name:this.lang.prompt.common.extraSettings.choices.recommended,value:"recommended"},{name:this.lang.prompt.common.extraSettings.choices.custom,value:"custom"}],default:this.answers.extraSettings||"recommended"},{type:"list",name:"module",message:this.lang.prompt.common.module.message,choices:[{name:this.lang.prompt.common.module.choices.none,value:"none"},{name:this.lang.prompt.common.module.choices.commonjs,value:"commonjs"},{name:this.lang.prompt.common.module.choices.umd,value:"umd"}],default:"amd"!==this.answers.module?this.answers.module||"commonjs":"commonjs",when:answers=>{return"custom"===answers.extraSettings&&/^(node|electron)$/i.test(answers.env)}},{type:"list",name:"module",message:this.lang.prompt.common.module.message,choices:[{name:this.lang.prompt.common.module.choices.none,value:"none"},{name:this.lang.prompt.common.module.choices.amd,value:"amd"},{name:this.lang.prompt.common.module.choices.umd,value:"umd"}],default:"commonjs"!==this.answers.module?this.answers.module||"amd":"amd",when:answers=>{return"custom"===answers.extraSettings&&"web"===answers.env}},{type:"list",name:"module",message:this.lang.prompt.common.module.message,choices:[{name:this.lang.prompt.common.module.choices.none,value:"none"},{name:this.lang.prompt.common.module.choices.commonjs,value:"commonjs"},{name:this.lang.prompt.common.module.choices.amd,value:"amd"},{name:this.lang.prompt.common.module.choices.umd,value:"umd"}],default:this.answers.module||"commonjs",when:answers=>{return"custom"===answers.extraSettings&&"electron-renderer"===answers.env}},{type:"list",name:"es",message:this.lang.prompt.common.es.message,choices:[{name:this.lang.prompt.common.es.choices.es5,value:"es5"},{name:this.lang.prompt.common.es.choices.es2015,value:"es2015"}],default:this.answers.es||("web"===this.answers.env?"es5":"es2015"),when:answers=>{return"custom"===answers.extraSettings}},{type:"confirm",name:"supportCSS",message:this.lang.prompt.library.supportCSS.message,default:this.answers.supportCSS||false,when:answers=>{return"custom"===answers.extraSettings}}]}displaySettingsByAnswers(answers){const config=(()=>{switch(answers.env){case"web":return $.extend({},libConfig.browser,answers);case"node":return $.extend({},libConfig.node,answers);case"electron":return $.extend({},libConfig.electron,answers);case"electron-renderer":return $.extend({},libConfig.electron,answers);default:console.error(chalk.red("unsupported target: "+answers.env));process.exit(1)}})();const items=[{name:"extraSettings",recommend:false},{name:"projectName",recommend:false},{name:"version",recommend:false},{name:"license",recommend:false},{name:"env",recommend:false},{name:"module",recommend:true},{name:"es",recommend:true},{name:"supportCSS",recommend:true}];try{items.forEach(item=>{const color=item.recommend&&"recommended"===answers.extraSettings?"yellow":undefined;console.log(this.config2description(config,item.name,color))})}catch(error){console.error(chalk.red("error: "+JSON.stringify(error,null,4)));process.exit(1)}return config}LIMITATION(){return libConfig.ELECTRON_AVAILABLE?"":" "+this.lang.prompt.common.stilNotAvailable}}exports.PromptLibrary=PromptLibrary},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const cdp_lib_1=__webpack_require__(0);const prompt_base_1=__webpack_require__(1);const chalk=cdp_lib_1.Utils.chalk;class PromptMobileApp extends prompt_base_1.PromptBase{prompting(cmdInfo){return new Promise((resolve,reject)=>{reject("mobile app prompting, under construction.")})}get questions(){return[]}displaySettingsByAnswers(answers){return null}}exports.PromptMobileApp=PromptMobileApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const cdp_lib_1=__webpack_require__(0);const prompt_base_1=__webpack_require__(1);const chalk=cdp_lib_1.Utils.chalk;class PromptWebApp extends prompt_base_1.PromptBase{prompting(cmdInfo){return new Promise((resolve,reject)=>{reject("web app prompting, under construction.")})}get questions(){return[]}displaySettingsByAnswers(answers){return null}}exports.PromptWebApp=PromptWebApp},function(module,exports){module.exports=require("commander")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)}]);
//# sourceMappingURL=cdp-cli.min.js.map